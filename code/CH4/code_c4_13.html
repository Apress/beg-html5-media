<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Beginning HTML5 media: chapter 4: example 13</title>
    <link rel="stylesheet" media="screen" href="style.css" type="text/css"/>
  </head>

  <body>
    <div class="container">
      <h1>Chapter 4: example 13</h1>

      <video poster="img/Monty.jpg" controls width="50%">
        <source src="video/Monty.mp4"  type="video/mp4">
        <source src="video/Monty.webm" type="video/webm">
      
        <track id="track1" label="English" src="tracks/Monty_subs_en.vtt" kind="subtitles" srclang="en" default>
      </video>
      <h3>TextTrack object:</h3>
      <table>
          <thead>
              <tr>
                  <td>Cue Number</td>
                  <td>ID</td>
                  <td>StartTime</td>
                  <td>EndTime</td>
                  <td>Text</td>
              </tr>
          </thead>
          <tbody id="values">
          </tbody>
      </table>
    </div>

    <script>
      var video = document.getElementsByTagName('video')[0];
      var track = document.getElementsByTagName('track')[0];
      var values = document.getElementById('values');
      var content;

      function loaded() {
          for (var i=0; i < track.track.cues.length; i++) {
              content = "<tr>";
              content += "<td>" + i + "</td>";
              content += "<td>" + track.track.cues[i].id + "</td>";
              content += "<td>" + track.track.cues[i].startTime + "</td>";
              content += "<td>" + track.track.cues[i].endTime + "</td>";
              content += "<td>" + track.track.cues[i].text + "</td></tr>";
              values.innerHTML += content;
          }
      }
      video.addEventListener("loadedmetadata", loaded, false);
    </script>
</html>